(()=>{var e={880:function(e,t,n){var s,o;!function(i,a){"use strict";s=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],o={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function r(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments])),console.trace}function d(s){return"debug"===s&&(s="log"),typeof console!==t&&("trace"===s&&n?r:void 0!==console[s]?a(console,s):void 0!==console.log?a(console,"log"):e)}function c(){for(var n=this.getLevel(),o=0;o<s.length;o++){var i=s[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function w(e,t,n){return d(e)||l.apply(this,arguments)}function g(e,n){var a,r,d,l=this,g="loglevel";function m(e){var n=(s[e]||"silent").toUpperCase();if(typeof window!==t&&g){try{return void(window.localStorage[g]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(g)+"="+n+";"}catch(e){}}}function v(){var e;if(typeof window!==t&&g){try{e=window.localStorage[g]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,s=encodeURIComponent(g),o=n.indexOf(s+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+s.length+1))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}}function p(){if(typeof window!==t&&g){try{window.localStorage.removeItem(g)}catch(e){}try{window.document.cookie=encodeURIComponent(g)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function h(e){var t=e;if("string"==typeof t&&void 0!==l.levels[t.toUpperCase()]&&(t=l.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=l.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?g+=":"+e:"symbol"==typeof e&&(g=void 0),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||w,l.getLevel=function(){return null!=d?d:null!=r?r:a},l.setLevel=function(e,t){return d=h(e),!1!==t&&m(d),c.call(l)},l.setDefaultLevel=function(e){r=h(e),v()||l.setLevel(e,!1)},l.resetLevel=function(){d=null,p(),c.call(l)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)},l.rebuild=function(){if(i!==l&&(a=h(i.getLevel())),c.call(l),i===l)for(var e in o)o[e].rebuild()},a=h(i?i.getLevel():"WARN");var E=v();null!=E&&(d=h(E)),c.call(l)}(i=new g).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new g(e,i.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return o},i.default=i,i},void 0===(o="function"==typeof s?s.call(t,n,t,e):s)||(e.exports=o)}()},431:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageKeys=void 0,function(e){e.CONNECT_INFO="WEMIXSDK_CONNECT_INFO",e.LANG="WEMIXSDK_LANG",e.THEME="WEMIXSDK_THEME"}(n||(t.LocalStorageKeys=n={}))},135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_MESSAGES=void 0,t.ERROR_MESSAGES={100:"USER_CANCELED",103:"REQUEST_EXPIRED",105:"INVALID_CREDENTIAL",191:"WALLET_NOT_CONNECTED",192:"CHAIN_NOT_SUPPORTED",300:"WC_CONNECT_ERROR",301:"WC_SIGN_ERROR",302:"WC_METHOD_NOT_SUPPORTED",303:"WC_WALLET_NOT_SUPPORTED",304:"WC_CANNOT_CONNECT_TO_OTHER_WALLET",305:"WC_NO_SESSION"}},156:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(38),t),o(n(984),t)},984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.freeze({UNA:"una",UNA_WALLET:"unawallet",WEMIX_WALLET:"wemixwallet",METAMASK:"metamask",PLAY_WALLET:"playwallet",PLAY_WALLET_WC:"playwalletwc",WEMIX_PLAY_APP:"wemixplayapp"}),s=Object.freeze({KOREAN:"ko",ENGLISH:"en",CHINESE_SIMPLIFIED:"zh-Hans",CHINESE_TRADITIONAL:"zh-Hant",JAPANESE:"ja",THAI:"th",SPANISH:"es",PORTUGUESE:"pt",RUSSIAN:"ru"}),o=Object.freeze({LIGHT:"light",DARK:"dark"});t.default={SUPPORTED_WALLET:n,WEMIX_LANGUAGE:s,WEMIX_THEME:o}},351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearLocalStorageKeys=void 0;const s=n(431);t.clearLocalStorageKeys=()=>{Object.values(s.LocalStorageKeys).forEach((e=>{window.localStorage.removeItem(e)}))}},38:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,i){function a(e){try{d(s.next(e))}catch(e){i(e)}}function r(e){try{d(s.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}d((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Wemix=void 0;const i=o(n(880)),a=n(135),r=n(431),d=n(351);class c{setLanguage(e){window.localStorage.setItem(r.LocalStorageKeys.LANG,e),this.lang=e}setTheme(e){window.localStorage.setItem(r.LocalStorageKeys.THEME,e),this.theme=e}constructor(e){if(this.isConnected=!1,this.address="",this.connectedWallet="",this.chainId=0,this.lang="en",this.theme="light",this.platform="",this.makeIframeSrc=(e,t)=>{const n=`${this.config.baseUrl}/${e}`,s=t?Object.entries(t).map((([e,t])=>`${e}=${t}`)).join("&"):"";return t?`${n}?${s}`:n},this.config=e,e.log?i.default.setLevel(e.log):i.default.setLevel("silent"),"undefined"!=typeof window){const e=window.navigator.userAgent.toLowerCase();if(/android|iphone|ipad/i.test(e)||/macintosh/i.test(e)&&5===window.navigator.maxTouchPoints?this.platform="web.mobile":this.platform="web.pc",window.localStorage.getItem(r.LocalStorageKeys.CONNECT_INFO)){const e=JSON.parse(window.localStorage.getItem(r.LocalStorageKeys.CONNECT_INFO));this.address=e.address,this.connectedWallet=e.wallet,this.chainId=e.chainId,this.isConnected=!0}if(window.localStorage.getItem(r.LocalStorageKeys.LANG)){const e=window.localStorage.getItem(r.LocalStorageKeys.LANG);this.lang=e}if(window.localStorage.getItem(r.LocalStorageKeys.THEME)){const e=window.localStorage.getItem(r.LocalStorageKeys.THEME);this.theme=e}}}resetClassAndLocalStorage(){this.isConnected=!1,this.address="",this.connectedWallet="",this.chainId=0,(0,d.clearLocalStorageKeys)()}createIframe(e){const t=document.createElement("iframe");return t.src=e,t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.overflow="hidden",t.style.zIndex="999999",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups"),t}static initialize(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(e)if(e.clientId)if(e.baseUrl)if(0===e.supportedWallet.length)n({message:"Supported wallet is required."});else{const n=new c(e);c.isInitialized=!0,t(n)}else n({message:"baseUrl is required."});else n({message:"clientId is required."});else n({message:"Config is required."})}))}))}connect(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.config.supportedWallet.every((e=>"wemixwallet"===e||"playwallet"===e))&&1111!==e&&1112!==e)n(this.getErrorObject(192));else if(this.isConnected)t({address:this.address,wallet:this.connectedWallet,chainId:this.chainId});else{const s=this.makeIframeSrc("connect",{clientId:this.config.clientId,"enable-wallet":this.config.supportedWallet.join(","),chainId:e,platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,type:"0"}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=e=>{const{type:t,payload:n}=e.data;"deeplink"===t&&(document.location.href=n.url,window.removeEventListener("message",a,!1))};window.addEventListener("message",a);const d=e=>{const{type:n,payload:s}=e.data;if("onConnectResult"===n){"una"===s.wallet&&(s.wallet="unawallet"),this.address=s.address,this.connectedWallet=s.wallet,this.chainId=s.chainId,this.isConnected=!0;const e={address:s.address,wallet:s.wallet,chainId:s.chainId};window.localStorage.setItem(r.LocalStorageKeys.CONNECT_INFO,JSON.stringify(e)),o.remove(),window.removeEventListener("message",d,!1),window.removeEventListener("message",i,!1),t(e)}};window.addEventListener("message",d);const c=e=>{const{type:t,payload:s}=e.data;"onConnectError"===t&&(o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),-100===s.code&&n(this.getErrorObject(105)),-101===s.code&&n(this.getErrorObject(100)),-200===s.code&&n(this.getErrorObject(300)),-201===s.code&&n(this.getErrorObject(300)),-5===s.code&&n(this.getErrorObject(303)),-203===s.code&&n(this.getErrorObject(304)))};window.addEventListener("message",c);const l=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",w)}}))}))}forcedConnect(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.config.supportedWallet.every((e=>"wemixwallet"===e||"playwallet"===e))&&1111!==e&&1112!==e)n(this.getErrorObject(192));else{const s=this.makeIframeSrc("connect",{clientId:this.config.clientId,"enable-wallet":this.config.supportedWallet.join(","),chainId:e,platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,type:"1"}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=e=>{const{type:t,payload:n}=e.data;"deeplink"===t&&(document.location.href=n.url,window.removeEventListener("message",a,!1))};window.addEventListener("message",a);const d=e=>{const{type:t}=e.data;"forcedDisconnect"===t&&(this.resetClassAndLocalStorage(),window.removeEventListener("message",d,!1))};window.addEventListener("message",d);const c=e=>{const{type:n,payload:s}=e.data;if("onConnectResult"===n){"una"===s.wallet&&(s.wallet="unawallet"),this.address=s.address,this.connectedWallet=s.wallet,this.chainId=s.chainId,this.isConnected=!0;const e={address:s.address,wallet:s.wallet,chainId:s.chainId};window.localStorage.setItem(r.LocalStorageKeys.CONNECT_INFO,JSON.stringify(e)),o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),t(e)}};window.addEventListener("message",c);const l=e=>{const{type:t,payload:s}=e.data;"onConnectError"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),-100===s.code&&n(this.getErrorObject(105)),-101===s.code&&n(this.getErrorObject(100)),-200===s.code&&n(this.getErrorObject(300)),-201===s.code&&n(this.getErrorObject(300)),-5===s.code&&n(this.getErrorObject(303)),-203===s.code&&n(this.getErrorObject(304)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",w);const g=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",g,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",g)}}))}))}disconnect(){return s(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{if(this.isConnected){const t=this.makeIframeSrc("disconnect",{clientId:this.config.clientId,dm:"dark"===this.theme?"1":"0"}),n=this.createIframe(t);n.style.display="none",document.body.appendChild(n);const s=t=>{const{type:o}=t.data;"onDisconnect"===o&&(this.resetClassAndLocalStorage(),n.remove(),window.removeEventListener("message",s,!1),e())};window.addEventListener("message",s)}else t(this.getErrorObject(191))}))}))}playSignMessage(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.isConnected){const s=this.makeIframeSrc("sign",{clientId:this.config.clientId,method:"play_eth_sign",platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,address:this.address,chainId:this.chainId}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=t=>{var n;const{type:s}=t.data;"requestSignData"===s&&(null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"responseSignData",payload:JSON.stringify({address:this.address,type:"message",originalText:JSON.parse(e)})},"*"),window.removeEventListener("message",a,!1))};window.addEventListener("message",a);const r=e=>{const{type:t,payload:n}=e.data;if("deeplink"===t){const e=n.url;window.location.href=e,window.removeEventListener("message",r,!1)}};window.addEventListener("message",r);const d=n=>{const{type:s,payload:a}=n.data;"onSignResult"===s&&(o.remove(),window.removeEventListener("message",d,!1),window.removeEventListener("message",i,!1),t({signature:a.sig,rawTx:a.sig,rawData:{originalText:JSON.parse(e),signature:a.sig,rawTx:a.raw}}))};window.addEventListener("message",d);const c=e=>{const{type:t,payload:s}=e.data;"onSignError"===t&&(o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),-200===s.code&&n(this.getErrorObject(191)),-202===s.code&&n(this.getErrorObject(301)),-204===s.code&&(this.resetClassAndLocalStorage(),n(this.getErrorObject(305))))};window.addEventListener("message",c);const l=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",w)}else n(this.getErrorObject(191))}))}))}playSignTransaction(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{if(this.isConnected){const o=this.makeIframeSrc("sign",{clientId:this.config.clientId,method:"play_eth_sign",platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,address:this.address,chainId:this.chainId}),i=this.createIframe(o);document.body.appendChild(i);const a=e=>{var t,n;const{type:s,payload:o}=e.data;if("dialog"===s){window.confirm(o.message)?null===(t=i.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=i.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",a);const r=n=>{var s;const{type:o}=n.data;"requestSignData"===o&&(null===(s=i.contentWindow)||void 0===s||s.postMessage({type:"responseSignData",payload:JSON.stringify({address:this.address,type:"transaction",chainName:null!=t?t:null,originalText:JSON.parse(e)})},"*"),window.removeEventListener("message",r,!1))};window.addEventListener("message",r);const d=e=>{const{type:t,payload:n}=e.data;if("deeplink"===t){const e=n.url;window.location.href=e,window.removeEventListener("message",d,!1)}};window.addEventListener("message",d);const c=t=>{const{type:s,payload:o}=t.data;"onSignResult"===s&&(i.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",a,!1),n({signature:o.sig,rawTx:o.raw,rawData:Object.assign(Object.assign({},JSON.parse(e)),{signature:o.sig,rawTx:o.raw})}))};window.addEventListener("message",c);const l=e=>{const{type:t,payload:n}=e.data;"onSignError"===t&&(i.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",a,!1),-200===n.code&&s(this.getErrorObject(191)),-202===n.code&&s(this.getErrorObject(301)),-204===n.code&&(this.resetClassAndLocalStorage(),s(this.getErrorObject(305))))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"expire"===t&&(i.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",a,!1),s(this.getErrorObject(103)))};window.addEventListener("message",w);const g=e=>{const{type:t}=e.data;"close"===t&&(i.remove(),window.removeEventListener("message",g,!1),window.removeEventListener("message",a,!1),s(this.getErrorObject(100)))};window.addEventListener("message",g)}else s(this.getErrorObject(191))}))}))}signMessage(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.isConnected)if("wemixwallet"===this.connectedWallet)n(this.getErrorObject(302));else{const s=this.makeIframeSrc("sign",{clientId:this.config.clientId,method:"eth_sign",platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,address:this.address,chainId:this.chainId}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=t=>{var n;const{type:s}=t.data;if("requestSignData"===s){const t=JSON.stringify({message:e});null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"responseSignData",payload:t},"*"),window.removeEventListener("message",a,!1)}};window.addEventListener("message",a);const r=e=>{const{type:t,payload:n}=e.data;if("deeplink"===t){const e=n.url;window.location.href=e,window.removeEventListener("message",r,!1)}};window.addEventListener("message",r);const d=e=>{const{type:n,payload:s}=e.data;"onSignResult"===n&&(o.remove(),window.removeEventListener("message",d,!1),window.removeEventListener("message",i,!1),t({signature:s.sig,rawTx:"",rawData:""}))};window.addEventListener("message",d);const c=e=>{const{type:t,payload:s}=e.data;"onSignError"===t&&(o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),-200===s.code&&n(this.getErrorObject(191)),-202===s.code&&n(this.getErrorObject(301)),-204===s.code&&(this.resetClassAndLocalStorage(),n(this.getErrorObject(305))))};window.addEventListener("message",c);const l=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",w)}else n(this.getErrorObject(191))}))}))}signTransaction(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.isConnected)if("metamask"===this.connectedWallet)this.signMessage(JSON.parse(e).hash).then((e=>t(e))).catch((e=>n(e)));else{const s=this.makeIframeSrc("sign",{clientId:this.config.clientId,method:"eth_signTransaction",platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,address:this.address,chainId:this.chainId}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=t=>{var n;const{type:s}=t.data;"requestSignData"===s&&(null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"responseSignData",payload:e},"*"),window.removeEventListener("message",a,!1))};window.addEventListener("message",a);const r=e=>{const{type:t,payload:n}=e.data;if("deeplink"===t){const e=n.url;window.location.href=e,window.removeEventListener("message",r,!1)}};window.addEventListener("message",r);const d=n=>{const{type:s,payload:a}=n.data;"onSignResult"===s&&(o.remove(),window.removeEventListener("message",d,!1),window.removeEventListener("message",i,!1),t({signature:a.sig,rawTx:a.raw,rawData:Object.assign(Object.assign({},JSON.parse(e)),{signature:a.sig,rawTx:a.raw})}))};window.addEventListener("message",d);const c=e=>{const{type:t,payload:s}=e.data;"onSignError"===t&&(o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),-200===s.code&&n(this.getErrorObject(191)),-202===s.code&&n(this.getErrorObject(301)),-204===s.code&&(this.resetClassAndLocalStorage(),n(this.getErrorObject(305))))};window.addEventListener("message",c);const l=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",w)}else n(this.getErrorObject(191))}))}))}personalSignMessage(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{if(this.isConnected)if("wemixplayapp"!==this.connectedWallet)n(this.getErrorObject(302));else{const s=this.makeIframeSrc("sign",{clientId:this.config.clientId,method:"personal_sign",platform:this.platform,dm:"dark"===this.theme?"1":"0",lang:this.lang,address:this.address,chainId:this.chainId}),o=this.createIframe(s);document.body.appendChild(o);const i=e=>{var t,n;const{type:s,payload:i}=e.data;if("dialog"===s){window.confirm(i.message)?null===(t=o.contentWindow)||void 0===t||t.postMessage({type:"dialogResult",payload:{result:"ok"}},"*"):null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"dialogResult",payload:{result:"cancel"}},"*")}};window.addEventListener("message",i);const a=t=>{var n;const{type:s}=t.data;if("requestSignData"===s){const t=JSON.stringify({message:e});null===(n=o.contentWindow)||void 0===n||n.postMessage({type:"responseSignData",payload:t},"*"),window.removeEventListener("message",a,!1)}};window.addEventListener("message",a);const r=e=>{const{type:t,payload:n}=e.data;if("deeplink"===t){const e=n.url;window.location.href=e,window.removeEventListener("message",r,!1)}};window.addEventListener("message",r);const d=n=>{const{type:s,payload:a}=n.data;"onSignResult"===s&&(o.remove(),window.removeEventListener("message",d,!1),window.removeEventListener("message",i,!1),t({signature:a.sig,rawTx:a.sig,rawData:{originalText:e,signature:a.sig,rawTx:a.raw}}))};window.addEventListener("message",d);const c=e=>{const{type:t,payload:s}=e.data;"onSignError"===t&&(o.remove(),window.removeEventListener("message",c,!1),window.removeEventListener("message",i,!1),-200===s.code&&n(this.getErrorObject(191)),-202===s.code&&n(this.getErrorObject(301)),-204===s.code&&(this.resetClassAndLocalStorage(),n(this.getErrorObject(305))))};window.addEventListener("message",c);const l=e=>{const{type:t}=e.data;"expire"===t&&(o.remove(),window.removeEventListener("message",l,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(103)))};window.addEventListener("message",l);const w=e=>{const{type:t}=e.data;"close"===t&&(o.remove(),window.removeEventListener("message",w,!1),window.removeEventListener("message",i,!1),n(this.getErrorObject(100)))};window.addEventListener("message",w)}else n(this.getErrorObject(191))}))}))}switchChain(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{this.isConnected||n(this.getErrorObject(191)),"unawallet"===this.connectedWallet?(this.chainId=e,window.localStorage.setItem(r.LocalStorageKeys.CONNECT_INFO,JSON.stringify({address:this.address,wallet:this.connectedWallet,chainId:e})),t()):n(this.getErrorObject(302))}))}))}getErrorObject(e){return{code:e,message:a.ERROR_MESSAGES[e]}}}t.Wemix=c,c.isInitialized=!1,window.Wemix=c}},t={};(function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports})(156)})();